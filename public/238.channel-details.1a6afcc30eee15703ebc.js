"use strict";(self.webpackChunkmy_new_custom_application_project=self.webpackChunkmy_new_custom_application_project||[]).push([[238],{"./src/components/channel-details/channel-details.tsx":(e,o,s)=>{s.r(o),s.d(o,{default:()=>ve});var t=s("./node_modules/@babel/runtime-corejs3/core-js-stable/instance/values.js"),n=s.n(t),r=s("./node_modules/react-intl/lib/src/components/useIntl.js"),l=s("./node_modules/react-router/esm/react-router.js"),a=s("./node_modules/@commercetools-frontend/application-components/dist/commercetools-frontend-application-components.esm.js"),i=s("./node_modules/@commercetools-uikit/notifications/dist/commercetools-uikit-notifications.esm.js"),c=s("./node_modules/@commercetools-uikit/text/dist/commercetools-uikit-text.esm.js"),d=s("./node_modules/@commercetools-uikit/spacings/dist/commercetools-uikit-spacings.esm.js"),u=s("./node_modules/@commercetools-uikit/loading-spinner/dist/commercetools-uikit-loading-spinner.esm.js"),m=s("./node_modules/react/index.js"),p=s("./node_modules/@commercetools-frontend/application-shell-connectors/dist/commercetools-frontend-application-shell-connectors.esm.js"),h=s("./node_modules/@commercetools-frontend/l10n/dist/commercetools-frontend-l10n.esm.js"),b=s("./node_modules/@commercetools-frontend/constants/dist/commercetools-frontend-constants.esm.js"),f=s("./node_modules/@commercetools-frontend/permissions/dist/commercetools-frontend-permissions.esm.js"),j=s("./node_modules/@commercetools-frontend/actions-global/dist/commercetools-frontend-actions-global.esm.js"),y=s("./src/constants.ts"),g=s("./src/hooks/use-channels-connector/index.ts"),k=s("./node_modules/@commercetools-uikit/localized-text-input/dist/commercetools-uikit-localized-text-input.esm.js");const docToFormValues=(e,o)=>{var s,t,n,r;return{key:null!==(s=null===e||void 0===e?void 0:e.key)&&void 0!==s?s:"",roles:null!==(t=null===e||void 0===e?void 0:e.roles)&&void 0!==t?t:[],name:k.Z.createLocalizedString(o,null!==(n=(0,h.sM)(null!==(r=null===e||void 0===e?void 0:e.nameAllLocales)&&void 0!==r?r:[]))&&void 0!==n?n:{})}};var v=s("./node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js"),_=s.n(v),C=s("./node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js"),Z=s.n(C),x=s("./node_modules/formik/dist/formik.esm.js"),E=s("./node_modules/@babel/runtime-corejs3/helpers/esm/defineProperty.js"),L=s("./node_modules/@babel/runtime-corejs3/helpers/esm/classCallCheck.js"),D=s("./node_modules/@babel/runtime-corejs3/helpers/esm/createClass.js"),B=s("./node_modules/@babel/runtime-corejs3/helpers/esm/inherits.js"),S=s("./node_modules/@babel/runtime-corejs3/helpers/esm/possibleConstructorReturn.js"),R=s("./node_modules/@babel/runtime-corejs3/helpers/esm/getPrototypeOf.js"),F=s("./node_modules/@babel/runtime-corejs3/core-js-stable/instance/some.js"),M=s.n(F),w=s("./node_modules/@babel/runtime-corejs3/core-js-stable/object/values.js"),z=s.n(w),O=s("./node_modules/@babel/runtime-corejs3/core-js-stable/reflect/construct.js"),I=s.n(O),P=s("./node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols.js"),T=s.n(P),K=s("./node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js"),N=s.n(K),A=s("./node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor.js"),U=s.n(A),V=s("./node_modules/@babel/runtime-corejs3/core-js-stable/instance/for-each.js"),q=s.n(V),W=s("./node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors.js"),X=s.n(W),H=s("./node_modules/@babel/runtime-corejs3/core-js-stable/object/define-properties.js"),G=s.n(H),Q=s("./node_modules/@babel/runtime-corejs3/core-js-stable/object/define-property.js"),J=s.n(Q),Y=s("./node_modules/@commercetools-uikit/utils/dist/commercetools-uikit-utils.esm.js"),$=s("./node_modules/@commercetools-uikit/constraints/dist/commercetools-uikit-constraints.esm.js"),ee=s("./node_modules/@commercetools-uikit/field-label/dist/commercetools-uikit-field-label.esm.js"),oe=s("./node_modules/@commercetools-uikit/field-errors/dist/commercetools-uikit-field-errors.esm.js"),se=s("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function ownKeys(e,o){var s=Z()(e);if(T()){var t=T()(e);o&&(t=N()(t).call(t,(function(o){return U()(e,o).enumerable}))),s.push.apply(s,t)}return s}function _objectSpread(e){for(var o=1;o<arguments.length;o++){var s,t,n=null!=arguments[o]?arguments[o]:{};o%2?q()(s=ownKeys(Object(n),!0)).call(s,(function(o){(0,E.Z)(e,o,n[o])})):X()?G()(e,X()(n)):q()(t=ownKeys(Object(n))).call(t,(function(o){J()(e,o,U()(n,o))}))}return e}function _createSuper(e){var o=function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!I())return!1;if(I().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(I()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var s,t=(0,R.Z)(e);if(o){var n=(0,R.Z)(this).constructor;s=I()(t,arguments,n)}else s=t.apply(this,arguments);return(0,S.Z)(this,s)}}const te=(0,Y.aP)("localized-text-field-"),ne=(0,Y.aP)("localized-text-field-error-")();let re=function(e){(0,B.Z)(LocalizedTextField,e);var o=_createSuper(LocalizedTextField);function LocalizedTextField(){var e;(0,L.Z)(this,LocalizedTextField);for(var s=arguments.length,t=new Array(s),n=0;n<s;n++)t[n]=arguments[n];return(e=o.call(this,...t)).state={id:e.props.id},e}return(0,D.Z)(LocalizedTextField,[{key:"render",value:function render(){const e=this.props.touched&&(e=>{var o;return e&&M()(o=z()(e)).call(o,Boolean)})(this.props.errors);return this.props.hintIcon,this.props.hideLanguageExpansionControls,(0,se.tZ)($.Z.Horizontal,{max:this.props.horizontalConstraint,children:(0,se.BX)(d.Z.Stack,{scale:"xs",children:[(0,se.tZ)(ee.Z,{title:this.props.title,hint:this.props.hint,description:this.props.description,onInfoButtonClick:this.props.onInfoButtonClick,hintIcon:this.props.hintIcon,badge:this.props.badge,hasRequiredIndicator:this.props.isRequired,htmlFor:this.state.id}),(0,se.tZ)(k.Z,_objectSpread(_objectSpread({autoComplete:this.props.autoComplete,id:this.state.id,name:this.props.name,value:this.props.value,onChange:this.props.onChange,selectedLanguage:this.props.selectedLanguage,onBlur:this.props.onBlur,onFocus:this.props.onFocus,hideLanguageExpansionControls:this.props.hideLanguageExpansionControls,defaultExpandLanguages:this.props.defaultExpandLanguages,isAutofocussed:this.props.isAutofocussed,isDisabled:this.props.isDisabled,isReadOnly:this.props.isReadOnly,errors:this.props.errorsByLanguage,hasError:e,placeholder:this.props.placeholder,horizontalConstraint:"scale"},(0,Y.Ku)(this.props)),{},{"aria-invalid":e,"aria-errormessage":ne})),(0,se.tZ)(oe.Z,{id:ne,errors:this.props.errors,isVisible:e,renderError:this.props.renderError})]})})}}],[{key:"toFieldErrors",value:function toFieldErrors(e){return e}}]),LocalizedTextField}(m.Component);re.displayName="LocalizedTextField",re.defaultProps={horizontalConstraint:"scale"},re.getDerivedStateFromProps=(e,o)=>({id:(0,Y.dD)(e,o,te)}),re.propTypes={};var le=re,ae=s("./node_modules/@commercetools-uikit/text-field/dist/commercetools-uikit-text-field.esm.js"),ie=s("./node_modules/@commercetools-uikit/select-field/dist/commercetools-uikit-select-field.esm.js");const ce={inventorySupply:"InventorySupply",productDistribution:"ProductDistribution",orderExport:"OrderExport",orderImport:"OrderImport",primary:"Primary"};var de=s("./node_modules/@babel/runtime-corejs3/core-js-stable/array/is-array.js"),ue=s.n(de),me=s("./node_modules/@commercetools-uikit/text-input/dist/commercetools-uikit-text-input.esm.js"),pe=s("./node_modules/omit-empty-es/dist/omit-empty-es.esm.js");const channel_details_validate=e=>{const o={key:{},roles:{}};return me.Z.isEmpty(e.key)&&(o.key.missing=!0),ue()(e.roles)&&0===e.roles.length&&(o.roles.missing=!0),(0,pe.Z)(o)};const he=(0,s("./node_modules/react-intl/lib/index.js").vU)({backToChannelsList:{id:"ChannelDetails.backToChannelsList",defaultMessage:"Back to channels list"},duplicateKey:{id:"ChannelDetails.duplicateKey",defaultMessage:"A channel with this key already exists."},channelUpdated:{id:"ChannelDetails.channelUpdated",defaultMessage:"Channel {channelName} updated"},channelKeyLabel:{id:"ChannelDetails.channelKeyLabel",defaultMessage:"Channel key"},channelNameLabel:{id:"ChannelDetails.channelNameLabel",defaultMessage:"Channel name"},channelRolesLabel:{id:"ChannelDetails.channelRolesLabel",defaultMessage:"Channel roles"},hint:{id:"ChannelDetails.hint",defaultMessage:"This page demonstrates for instance how to use forms, notifications and how to update data using GraphQL, etc."},modalTitle:{id:"ChannelDetails.modalTitle",defaultMessage:"Edit channel"},channelDetailsErrorMessage:{id:"ChannelDetails.errorMessage",defaultMessage:"We were unable to fetch the channel details. Please check your connection, the provided channel ID and try again."}});var be;const fe=_()(be=Z()(ce)).call(be,(e=>({label:ce[e],value:ce[e]}))),ChannelDetailsForm=e=>{const o=(0,r.Z)(),s=(0,x.TA)({initialValues:e.initialValues,onSubmit:e.onSubmit,validate:channel_details_validate,enableReinitialize:!0}),t=(0,se.BX)(d.Z.Stack,{scale:"l",children:[(0,se.tZ)(ae.Z,{name:"key",title:o.formatMessage(he.channelKeyLabel),value:n()(s).key,errors:ae.Z.toFieldErrors(s.errors).key,touched:s.touched.key,onChange:s.handleChange,onBlur:s.handleBlur,isReadOnly:e.isReadOnly,renderError:e=>"duplicate"===e?o.formatMessage(he.duplicateKey):null,isRequired:!0,horizontalConstraint:13}),(0,se.tZ)(le,{name:"name",title:o.formatMessage(he.channelNameLabel),value:n()(s).name,errors:ae.Z.toFieldErrors(s.errors).name,touched:Boolean(s.touched.name),onChange:s.handleChange,onBlur:s.handleBlur,selectedLanguage:e.dataLocale,isReadOnly:e.isReadOnly,horizontalConstraint:13}),(0,se.tZ)(ie.Z,{name:"roles",title:o.formatMessage(he.channelRolesLabel),value:n()(s).roles,errors:ie.Z.toFieldErrors(s.errors).roles,touched:s.touched.roles,onChange:s.handleChange,onBlur:s.handleBlur,isMulti:!0,options:fe,isReadOnly:e.isReadOnly,isRequired:!0,horizontalConstraint:13})]});return e.children({formElements:t,values:n()(s),isDirty:s.dirty,isSubmitting:s.isSubmitting,submitForm:s.handleSubmit,handleReset:s.handleReset})};ChannelDetailsForm.displayName="ChannelDetailsForm";const je=ChannelDetailsForm;var ye=s("./node_modules/@babel/runtime-corejs3/core-js-stable/instance/reduce.js"),ge=s.n(ye);var ke=s("./node_modules/@commercetools-frontend/application-shell/dist/commercetools-frontend-application-shell.esm.js");const ChannelDetails=e=>{const o=(0,r.Z)(),s=(0,l.UO)(),t=(0,g.wP)(s.id),v=t.loading,_=t.error,C=t.channel,Z=(0,p.UV)((e=>{var o,s,t;return{dataLocale:null!==(o=e.dataLocale)&&void 0!==o?o:"",projectLanguages:null!==(s=null===(t=e.project)||void 0===t?void 0:t.languages)&&void 0!==s?s:[]}})),x=Z.dataLocale,E=Z.projectLanguages,L=(0,f.bk)({demandedPermissions:[y._.Manage]}),D=(0,j.E0)(),B=(0,j._F)(),S=(0,g.EE)(),R=(0,m.useCallback)((async(e,s)=>{const t=(n=e,{name:k.Z.omitEmptyTranslations(n.name),key:n.key,roles:n.roles});var n;try{await S.execute({originalDraft:C,nextDraft:t}),D({kind:"success",domain:b.w7.SIDE,text:o.formatMessage(he.channelUpdated,{channelName:(0,h.Wb)(e,{key:"name",locale:x,fallbackOrder:E})})})}catch(r){const e=(e=>{const o=ue()(e)?e:[e],s=ge()(o).call(o,((e,o)=>{var s,t,n,r;const l=null!==(s=null===o||void 0===o||null===(t=o.extensions)||void 0===t?void 0:t.code)&&void 0!==s?s:o.code,a=null!==(n=null===o||void 0===o||null===(r=o.extensions)||void 0===r?void 0:r.field)&&void 0!==n?n:o.field;return"DuplicateField"===l?e.formErrors[a]={duplicate:!0}:e.unmappedErrors.push(o),e}),{formErrors:{},unmappedErrors:[]}),t=s.formErrors,n=s.unmappedErrors;return{formErrors:(0,pe.Z)(t),unmappedErrors:n}})(r);e.unmappedErrors.length>0&&B({errors:e.unmappedErrors}),s.setErrors(e.formErrors)}}),[C,S,x,o,E,B,D]);return(0,se.tZ)(je,{initialValues:docToFormValues(C,E),onSubmit:R,isReadOnly:!L,dataLocale:x,children:s=>{var t;const r=(0,h.Wb)({name:null===(t=n()(s))||void 0===t?void 0:t.name},{key:"name",locale:x,fallbackOrder:E,fallback:b.xL});return(0,se.BX)(a.ck,{title:r,isOpen:!0,onClose:e.onClose,isPrimaryButtonDisabled:s.isSubmitting||!s.isDirty||!L,isSecondaryButtonDisabled:!s.isDirty,onSecondaryButtonClick:s.handleReset,onPrimaryButtonClick:()=>s.submitForm(),labelPrimaryButton:a.ck.Intl.save,labelSecondaryButton:a.ck.Intl.revert,children:[v&&(0,se.tZ)(d.Z.Stack,{alignItems:"center",children:(0,se.tZ)(u.Z,{})}),_&&(0,se.tZ)(i.I,{type:"error",children:(0,se.tZ)(c.Z.Body,{children:o.formatMessage(he.channelDetailsErrorMessage)})}),C&&s.formElements,C&&(0,se.tZ)(ke.H4,{additionalParts:[r]}),null===C&&(0,se.tZ)(a.uW,{})]})}})};ChannelDetails.displayName="ChannelDetails";const ve=ChannelDetails},"./src/constants.ts":(e,o,s)=>{s.d(o,{_:()=>t});const t=(0,s("./node_modules/@commercetools-frontend/application-shell/ssr/dist/commercetools-frontend-application-shell-ssr.esm.js").X7)("product-review")}}]);
//# sourceMappingURL=238.channel-details.1a6afcc30eee15703ebc.js.map